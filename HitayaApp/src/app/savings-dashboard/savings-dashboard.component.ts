import { Component, OnInit } from '@angular/core';
import Chart from 'chart.js/auto';

import { HatTokenService } from '../hitaya-services/HAT_TOKEN/hat-token.service';

import { NgForm } from '@angular/forms';
import { Router } from '@angular/router';

@Component({
  selector: 'app-savings-dashboard',
  templateUrl: './savings-dashboard.component.html',
  styleUrls: ['./savings-dashboard.component.css']
})
export class SavingsDashboardComponent implements OnInit {

  userName: string;
  userLayout: boolean = false;
  commonLayout: boolean = false;


  userRole: string;
  emailId: string;
  errMsg: string;

  FinaceData: any;
  savings: number = 200;

  constructor(private hat_token_servie: HatTokenService, private router: Router) {
    this.userName = sessionStorage.getItem('userName');
    console.log(this.userName);
    if (this.userName != null) {
      this.userLayout = true;
    }
    else {
      this.commonLayout = true;
    }
  }

  ngOnInit(): void {

    //this.userName = sessionStorage.getItem('userName');
    //this.emailId = this.userName;





    //this.getfinance();
    var delayed;
    var myChart = new Chart("dashboard-chart", {
      type: 'bar',
      data: {
        labels: ['Year', 'Status', 'Adult Mortality', 'Infant Deaths', 'Alcohol', 'Percentage Expenditure', 'Hepatitis B', 'Measles', 'BMI', 'Five Year Deadths', 'Polio', 'Total Expenditure', 'Diptheria', 'HIV/AIDS', 'GDP', 'Population', 'Thinness (1 - 19 years)', 'Thinness (5 - 9 years)', 'Income Composition of Resources', 'Schooling'],
        datasets: [{
          label: 'Health Data',
          data: [0.170033, 0.482136, -0.696359, -0.196557, 0.404877, 0.381864, 0.256762, -0.157586, 0.567694, -0.222529, 0.465556, 0.218086, 0.479495, -0.556556, 0.461455, -0.021538, -0.477183, -0.471584, 0.724776, 0.751975],
          backgroundColor: [
            'rgba(255, 206, 86, 0.2)',
            'rgba(75, 192, 192, 0.2)',
            'rgba(255, 206, 86, 0.2)',
            'rgba(75, 192, 192, 0.2)',
            'rgba(153, 102, 255, 0.2)',
            'rgba(255, 159, 64, 0.2)',
            'rgba(255, 99, 132, 0.2)',
            'rgba(54, 162, 235, 0.2)',
            'rgba(255, 206, 86, 0.2)',
            'rgba(75, 192, 192, 0.2)',
            'rgba(153, 102, 255, 0.2)',
            'rgba(255, 159, 64, 0.2)',
            'rgba(255, 99, 132, 0.2)',
            'rgba(54, 162, 235, 0.2)',
            'rgba(255, 206, 86, 0.2)',
            'rgba(75, 192, 192, 0.2)',
            'rgba(153, 102, 255, 0.2)',
            'rgba(255, 159, 64, 0.2)',
            'rgba(255, 99, 132, 0.2)',
            'rgba(255, 159, 64, 0.2)'
          ],
          borderColor: [
            'rgba(255, 206, 86, 1)',
            'rgba(75, 192, 192, 1)',
            'rgba(255, 206, 86, 1)',
            'rgba(75, 192, 192, 1)',
            'rgba(153, 102, 255, 1)',
            'rgba(255, 159, 64, 1)',
            'rgba(255, 99, 132, 1)',
            'rgba(54, 162, 235, 1)',
            'rgba(255, 206, 86, 1)',
            'rgba(75, 192, 192, 1)',
            'rgba(153, 102, 255, 1)',
            'rgba(255, 159, 64, 1)',
            'rgba(255, 99, 132, 1)',
            'rgba(54, 162, 235, 1)',
            'rgba(255, 206, 86, 1)',
            'rgba(75, 192, 192, 1)',
            'rgba(153, 102, 255, 1)',
            'rgba(255, 159, 64, 1)',
            'rgba(255, 99, 132, 1)',
            'rgba(255, 159, 64, 1)'
          ],
          borderWidth: 1
        }]
      },
      options: {
        scales: {
          y: {
            beginAtZero: true
          }
        },
        animation: {
          onComplete: () => {
            delayed = true;
          },
          delay: (context) => {
            let delay = 0;
            //if (context.type === 'data' && context.mode === 'default' && !delayed) {
            //  delay = context.dataIndex * 300 + context.datasetIndex * 100;
            //}
            return delay;
          },
        }
      }
    });




    //var myChart1 = new Chart("dashboard-chart-dbl-line-display", {
    //  data: {
    //    datasets: [{
    //      type: 'line',
    //      label: 'Nominial Growth',
    //      data: ["4.82396626390641", "3.8039753213758", "7.86038147553259", "7.92293661286503", "7.92343062149763", "8.06073257303272", "7.66081506504928", "3.08669805953289", "7.86188883303498", "8.49758470158106", "5.2413447428854", "5.45635895072287", "6.38610640094825", "7.41022760508854", "7.99625344413879", "8.2563058441893", "7.04382085537057", "6.11958684136602", "4.18072762475113", "-10.29884477"],
    //      borderColor: '#81b214',
    //      borderWidth: 2
    //    }, {
    //      type: 'line',
    //      label: 'Inflation Data',
    //      data: ["3.7792900970972", "4.29715803685739", "3.80586901992805", "3.76723694399324", "4.24635082758967", "5.79651792035429", "6.3728813559322", "8.34926704907584", "10.8823529411765", "11.9893899204244", "8.85836096636663", "9.31244560487382", "10.9076433121019", "6.35319454414936", "5.87242659466756", "4.94102645839974", "2.49088699878493", "4.86069946650859", "7.65969474279253", "3.48727272"],
    //      borderColor: '#ee5253',
    //      borderWidth: 2
    //    }],
    //    labels: ["2001", "2002", "2003", "2004", "2005", "2006", "2007", "2008", "2009", "2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020"],
    //  },
    //  options: {
    //    scales: {
    //      y: {
    //        beginAtZero: true
    //      }
    //    }
    //  }
    //});

    //var myChart3 = new Chart("dashboard-chart-multiline-display", {
    //  data: {
    //    datasets: [{
    //      type: 'line',
    //      label: 'US',
    //      data: ["1.45797598627786", "1.07072414764723", "1.19877334820185", "1.2396694214876", "1.27891156462583", "1.58516926383669", "3.01507537688439", "2.77278562259307", "4.27179615288534", "5.4623862002875", "5.83825533848253", "4.29276668813045", "3.27227824655283", "6.17776006377041", "11.0548048048048", "9.14314686496534", "5.74481263549085", "6.50168399472839", "7.63096383885602", "11.2544711292795", "13.5492019749684", "10.3347153402771", "6.13142700027494", "3.21243523316063", "4.30053547523427", "3.54564415209369", "1.89804772234275", "3.66456321751691", "4.07774110744408", "4.82700303008949", "5.39795643990322", "4.23496396453853", "3.0288196781497", "2.95165696638554", "2.6074415921546", "2.80541968853655", "2.9312041999344", "2.33768993730741", "1.55227909874362", "2.18802719697358", "3.37685727149935", "2.82617111885402", "1.58603162650603", "2.27009497336113", "2.67723669309173", "3.39274684549547", "3.22594410070407", "2.85267248150136", "3.83910029665101", "-0.35554626629975", "1.64004344238989", "3.15684156862206", "2.06933726526059", "1.46483265562714", "1.62222297740821", "0.118627135552435", "1.26158320570537", "2.13011000365963", "2.44258329692818", "1.81221007526015", ""],
    //      borderColor: '#0d83dd',
    //      borderWidth: 2
    //    }, {
    //      type: 'line',
    //      label: 'China',
    //      data: ["7.23383553065603", "18.8118179448753", "18.2456383621648", "3.05229012075233", "3.55668565220451", "6.3539813402487", "14.6100786356603", "24.2569843505754", "16.7912270168851", "8.31315334383153", "2.78646849655587", "-0.773182345961248", "-1.40147380776612", "0.347806256807194", "0.719132436811498", "-0.731975500083577", "1.12760196090496", "3.82463762400933", "1.77641616843146", "1.6494331013998", "4.81676531343752", "5.9252552887092", "-0.728171334173071", "3.17532798075574", "5.55389705904324", "2.61952616488542", "2.62104902701091", "1.92164341593894", "1.4370245139476", "2.00000000000002", "1.59313725490194", "2.07478890229193", "2.89923579925941", ""],
    //      borderColor: '#eb4d4b',
    //      borderWidth: 2
    //    }, {
    //      type: 'line',
    //      label: 'Japan',
    //      data: ["3.57451152535917", "5.36846178480054", "6.8354403481973", "6.70690556397994", "3.80038945305748", "6.65599094260623", "5.04083205887675", "3.98984808881514", "5.33943295739348", "5.24982091102023", "6.9241738348578", "6.39534883720932", "4.8435171385991", "11.608623548922", "23.2222458076842", "11.7312661498708", "9.37403638606229", "8.16182689596844", "4.20956601068683", "3.7018509254627", "7.77858176555715", "4.91216291820523", "2.74104095563142", "1.89971971348489", "2.26161369193154", "2.03227734608488", "0.595586799453213", "0.126176841696618", "0.678557580457501", "2.2722896206432", "3.07851628695162", "3.2514384875331", "1.76028306059265", "1.24304589707929", "0.695458057868973", "-0.127899045020464", "0.136600358575938", "1.74780458692133", "0.661974191385916", "-0.34129692832762", "-0.676578683595063", "-0.740055504162808", "-0.923494026942291", "-0.256541816316074", "-0.00857338820299998", "-0.282946068764487", "0.249355116079096", "0.0600394544986868", "1.38007886164923", "-1.35283672951722", "-0.719979429159149", "-0.267633600966946", "-0.0519390581717368", "0.346440325653898", "2.76195408251338", "0.789517890139427", "-0.116666666666671", "0.467211747038214", "0.979903670486641", "0.476973684210521", ""],
    //      borderColor: '#D6A2E8',
    //      borderWidth: 2
    //    }, {
    //      type: 'line',
    //      label: 'Germany',
    //      data: ["1.53661155971013", "2.29367579618988", "2.84328008602129", "2.96696086316878", "2.33572809548972", "3.24232938546164", "3.53305857768815", "1.79604550700727", "1.47030439199653", "1.91266394636876", "3.4502416671467", "5.24097417077837", "5.48493671907592", "7.03202572360937", "6.98643242500426", "5.91032884500704", "4.24663460795069", "3.73416842414874", "2.71869053600734", "4.04362200638281", "5.44105619058071", "6.34424091961786", "5.24104712605721", "3.29341460291844", "2.40579506889857", "2.06623073224692", "-0.129412805250905", "0.249906160316282", "1.27412397156105", "2.78055980684944", "2.69647137791463", "4.04703681637387", "5.05697932185187", "4.47457505486754", "2.69305738121724", "1.70616052419454", "1.44972647330127", "1.93936942452383", "0.911185301235183", "0.58543314394471", "1.44026818676794", "1.98385693617829", "1.42080560518857", "1.03422776551069", "1.66573340932676", "1.54690965159041", "1.57742825864226", "2.29834179696226", "2.62838174873985", "0.31273762987172", "1.10380916115812", "2.07517452479837", "2.0084909216701", "1.5047209800535", "0.906797948515676", "0.51442053951781", "0.49174862477081", "1.50949655801608", "1.73216766075662", "1.4456670146976", ""],
    //      borderColor: '#2C3A47',
    //      borderWidth: 2
    //    }, {
    //      type: 'line',
    //      label: 'UK',
    //      data: ["1.00357570390171", "3.4474962304662", "4.19649888238551", "2.01854355976227", "3.28158694697213", "4.77377455386915", "3.90961779211888", "2.48211560474808", "4.69742798827244", "5.44666363048887", "6.36656841727438", "9.44483742337138", "7.07109839479793", "9.1960331665781", "16.0440111889862", "24.2072876743291", "16.5595225588084", "15.8402667458767", "8.26314103860768", "13.4212799774013", "17.9659242656858", "11.8766265142296", "8.59886383332181", "4.60930327269783", "4.96071097821929", "6.07139434015118", "3.42760940369308", "4.14892232052949", "4.15535171583102", "5.76024909185262", "8.06346090938833", "7.46178295746933", "4.59154929577464", "2.55857796929707", "2.21901260504202", "2.69749518304432", "2.85178236397748", "2.20114313510882", "1.82056163731558", "1.7529508005142", "1.18295624210404", "1.53234960272418", "1.52040245947458", "1.3765003854201", "1.39039756680426", "2.08913649025072", "2.45566166439288", "2.38656150773328", "3.52140856342537", "1.96173173560107", "2.49265472467065", "3.85611244682819", "2.57323479654528", "2.29166666666666", "1.45112016293279", "0.368046842325369", "1.00841736811403", "2.55775577557754", "2.29283990345939", "1.73810460086511", ""],
    //      borderColor: '#5352ed',
    //      borderWidth: 2
    //    }, {
    //      type: 'line',
    //      label: 'India',
    //      data: ["1.77988179100645", "1.69523356081046", "3.63220813270101", "2.94615364284598", "13.3552524507254", "9.47475169025673", "10.8018601486887", "13.0622016027371", "3.23741930503482", "-0.584142752491194", "5.09225559428026", "3.07994286976129", "6.44210473228518", "16.940809783164", "28.5987304570334", "5.74842851397524", "-7.6339318169006", "8.30746910409125", "2.52303702029634", "6.27569344306325", "11.3460553263303", "13.112551332307", "7.8907481204264", "11.8680725081949", "8.31891774285439", "5.55642484211569", "8.72970932266374", "8.80114693834961", "9.38346563197176", "7.0742804826775", "8.97122965304084", "13.8702400466867", "11.7878213151889", "6.32689307165389", "10.2479338044323", "10.2248846949476", "8.97714714580872", "7.16424747259148", "13.2308486766948", "4.66981515539953", "4.00943919152636", "3.7792900970972", "4.29715803685739", "3.80586901992805", "3.76723694399324", "4.24635082758967", "5.79651792035429", "6.3728813559322", "8.34926704907584", "10.8823529411765", "11.9893899204244", "8.85836096636663", "9.31244560487382", "10.9076433121019", "6.35319454414936", "5.87242659466756", "4.94102645839974", "2.49088699878493", "4.86069946650859", "7.65969474279253", ""],
    //      borderColor: '#ffa502',
    //      borderWidth: 2
    //    }, {
    //      type: 'line',
    //      label: 'France',
    //      data: ["4.1399357551843", "2.4004610454632", "5.33128007065638", "4.99915289796852", "3.211191702931", "2.7031045587308", "2.60200076636453", "2.79177709435144", "4.54320486402014", "6.04596284173893", "5.29964124562672", "5.3975186559511", "6.06300309718189", "7.38060106398913", "13.6493174728138", "11.6859272493228", "9.62549578155529", "9.49455467190429", "9.25055846724437", "10.6467341716663", "13.5625788483016", "13.3144055680071", "11.9784719523805", "9.45954847235314", "7.6738026224732", "5.83109973854516", "2.53852591781416", "3.28889821400136", "2.70081527508111", "3.49830220700748", "3.19428338029481", "3.21340732409685", "2.36376046269354", "2.10446277124641", "1.65551532926996", "1.79648142095595", "1.98288365089736", "1.20394294026966", "0.65112686783302", "0.537141639134613", "1.6759598872093", "1.63478079549599", "1.9234122872706", "2.09847219146922", "2.14208964640242", "1.74586936380481", "1.67512449608728", "1.48799805953858", "2.81286194914787", "0.0876204781574529", "1.53112270420924", "2.11159795174997", "1.95419531613507", "0.863715497861826", "0.507758822937957", "0.0375143805125363", "0.183334861123848", "1.03228275064674", "1.85081508315494", "1.10825492288292", ""],
    //      borderColor: '#EA2027',
    //      borderWidth: 2
    //    }, {
    //      type: 'line',
    //      label: 'Italy',
    //      data: ["2.35016141377048", "2.05069731278691", "4.69114360740474", "7.45471822539107", "5.91232253218581", "4.51926830743467", "2.34658893413319", "3.73333832073823", "1.27731335390796", "2.65725273386967", "4.96831987329337", "4.79166438333785", "5.74950393730015", "10.7986174547601", "19.1597695854699", "16.9505025668306", "16.6141664725788", "17.13004878665", "12.0940138425074", "14.7985735661485", "21.0641682770745", "17.9692987519672", "16.4804146202215", "14.646576674877", "10.794496007681", "9.20599144253119", "5.82354691862018", "4.7472849038979", "5.05824747667121", "6.25983137956973", "6.45660906146405", "6.24999929790291", "5.27058998592932", "4.62673468331293", "4.0518421806572", "5.23542258044299", "4.00697668981039", "2.04310779750133", "1.95508557719383", "1.66345995007714", "2.53768532095005", "2.78516542713555", "2.46532319171164", "2.67255552772852", "2.20673661423654", "1.98529298527983", "2.09084391012755", "1.829741122024", "3.34783258401023", "0.774768131387384", "1.52551602118248", "2.78063272879324", "3.04136333226773", "1.21999342274305", "0.241047429826773", "0.0387903996579552", "-0.0940166569157271", "1.22653316645808", "1.13748763600395", "0.611246943765291", ""],
    //      borderColor: '#009432',
    //      borderWidth: 2
    //    }, {
    //      type: 'line',
    //      label: 'Canada',
    //      data: ["1.35869565217391", "1.01876675603215", "1.06157112526541", "1.6281512605042", "1.91214470284239", "2.33265720081134", "3.81565906838456", "3.57995226730307", "4.05529953917053", "4.56155890168291", "3.34603981363828", "2.70491803278688", "4.9880287310455", "7.48764728240213", "10.997171145686", "10.672188595094", "7.54173862982152", "7.97644539614562", "8.97372335151215", "9.1446769790719", "10.1292205085452", "12.4716124148373", "10.7689718997139", "5.86358802977366", "4.30477830391736", "3.96203054065208", "4.19478629085617", "4.3561087122174", "4.02823414871611", "4.98362189985959", "4.78047693336305", "5.62586408593004", "1.49013290374545", "1.86507936507936", "0.165562913907281", "2.14876033057852", "1.57053112507137", "1.62121638084528", "0.995942456658074", "1.73484295105918", "2.71943995691972", "2.52512013979907", "2.25839440940856", "2.75856321360112", "1.85725871857261", "2.21355203439764", "2.00202539534156", "2.13838399266843", "2.37027067444294", "0.299466803009284", "1.77687154092629", "2.91213508872355", "1.51567823124521", "0.93829189781521", "1.90663590717873", "1.12524136094279", "1.4287595470108", "1.5968841285297", "2.268225672481", "1.94926902411596", ""],
    //      borderColor: '#32ff7e',
    //      borderWidth: 2
    //    }, {
    //      type: 'line',
    //      label: 'South Korea',
    //      data: ["7.9655780388723", "8.19564895830665", "6.61831775572471", "20.6916290621318", "29.4628156796379", "13.5482032863598", "11.2613858502853", "10.8824421524755", "10.7718195766741", "12.3895676789598", "15.9503416146001", "13.5117038546779", "11.6889857102633", "3.22102913870131", "24.3041953736937", "25.2492578991944", "15.3273285373806", "10.0966631590669", "14.4602876220116", "18.3235003042007", "28.697587276634", "21.3516531701039", "7.19084762569721", "3.42061545401478", "2.27394229841602", "2.4591170060939", "2.74998326953285", "3.04965909814169", "7.14609525631211", "5.70016093670056", "8.57360068709822", "9.33336072477763", "6.2126786445748", "4.80110248980126", "6.26581477198877", "4.48068699525355", "4.9248096866348", "4.43906376109768", "7.51334012248214", "0.812996589285747", "2.25918477850415", "4.06641964799839", "2.76251135208606", "3.51487924186862", "3.59059139085802", "2.75409020054754", "2.24184710439148", "2.53484687118478", "4.6737959569162", "2.75668647737581", "2.93918135927598", "4.02584624959385", "2.18722120847932", "1.30137705753611", "1.27471470205519", "0.706208169859214", "0.971674763956376", "1.94445590723395", "1.47586240396369", "0.38294613224406", ""],
    //      borderColor: '#0c2461',
    //      borderWidth: 2
    //    }
    //    ],
    //    labels: ["1960", "1961", "1962", "1963", "1964", "1965", "1966", "1967", "1968", "1969", "1970", "1971", "1972", "1973", "1974", "1975", "1976", "1977", "1978", "1979", "1980", "1981", "1982", "1983", "1984", "1985", "1986", "1987", "1988", "1989", "1990", "1991", "1992", "1993", "1994", "1995", "1996", "1997", "1998", "1999", "2000", "2001", "2002", "2003", "2004", "2005", "2006", "2007", "2008", "2009", "2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020"]
    //  },
    //  options: {
    //    scales: {
    //      y: {
    //        beginAtZero: true
    //      }
    //    }
    //  }
    //});

    



    var myChart4 = new Chart("dashboard-chart-pie-display", {
      type: 'pie',
      data: {
        labels: ['Gold Savings', 'Govt Bond/ Bank Savings', 'Insurance', 'Mutual Funds/ SIP', 'Stock Market/ Day Trading'],
        datasets: [{
          label: 'My First Dataset',
          data: [(this.savings / 12) * 0.05, (this.savings / 12) * 0.35, (this.savings / 12) * 0.20, (this.savings / 12) * 0.30, (this.savings / 12) * 0.10],
          backgroundColor: [
            'rgb(255, 205, 86)',
            'rgb(51, 204, 51)',
            'rgb(54, 162, 235)',
            'rgb(255, 153, 51)',
            'rgb(255, 99, 132)'
          ],
          hoverOffset: 5
        }]
      }
    });


  }


  //getfinance() {
  //  this.FinanceService.GetUserFinance(this.emailId).subscribe(
  //    responseProductData => {

  //      this.FinaceData = responseProductData[0];

  //      console.log(this.FinaceData);
  //      sessionStorage.setItem('RecommendedSavings', String(this.FinaceData["yearlySavingsRequired"]));
  //      console.log("OK");



  //    },
  //    responseProductError => {
  //      this.errMsg = responseProductError;
  //      console.log(this.errMsg);
  //    }
  //  );
  //}
}
